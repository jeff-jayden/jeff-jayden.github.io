---
title: ä»£ç æ ¼å¼åŒ–
comments: true
date: 2024-12-06 19:53:25
tags:
---

# å‰ç«¯ä»£ç æ ¼å¼åŒ–å…¨å¥—é…ç½®

<!-- more -->

# prettier å¿«é€Ÿé…ç½®

1. å®‰è£…

```shell
npm install --save-dev --save-exact prettier

// è¿è¡Œ
npx prettier --write index.js
```

2. é…ç½®

```json
// .prettierrc

echo {}> .prettierrc.json

{
  "trailingComma": "es5",
  "tabWidth": 2,
  "semi": false,
  "singleQuote": true
}
```

# eslint å¿«é€Ÿé…ç½®

1. å®‰è£…

```shell
// å®‰è£…ä¸€æ•´å¥—
npm i eslint eslint-config-prettier eslint-plugin-prettier eslint-plugin-vue prettier typescript-eslint -D

// å®‰è£…ä¾èµ–å¹¶åˆ›å»ºeslint.config.js æ–‡ä»¶
npm init @eslint/config@latest

// è¿è¡Œ
eslint æ–‡ä»¶è·¯å¾„ --fix
```

2. é…ç½®

```js
module.exports = {
  env: {
    browser: true,
    es2021: true,
    node: true,
  },
  extends: [
    'standard',
    'airbnb',
    'plugin:vue/vue3-recommended',
    'plugin:prettier/recommended',
    'prettier',
  ],
  parserOptions: {
    ecmaVersion: 13,
    sourceType: 'module',
  },
  plugins: ['vue'],
  rules: {
    'import/no-unresolved': 0,
    'import/no-extraneous-dependencies': 0,
  },
}

```

## å†²çªè§£å†³ï¼š

å®‰è£…è§£å†³å†²çªçš„ä¾èµ–

```shell
//1. å®‰è£… eslint-config-prettier
npm i -D eslint-config-prettier

//2. åœ¨eslintçš„é…ç½®æ–‡ä»¶ä¸­å†™å…¥ä»¥ä¸‹å†…å®¹
 extends: ['prettier'], // é¿å…ä¸ prettier å†²çª

//"extends": ["plugin:prettier/recommended"]ä¹Ÿå¯ä»¥è§£å†³å†²çª
```

## [eslint æ–‡ä»¶é…ç½®æ–‡æ¡£](https://eslint.org/docs/v8.x/use/configure/)

4. ### å…¶ä»–ä¾èµ–å®‰è£…è¯´æ˜

```shell
//ç”±äºESlintæœ¬èº«åªæ”¯æŒè¯†åˆ«JavaScriptï¼Œæ‰€ä»¥å¯¹äºvueæ–‡ä»¶ï¼Œè¿˜éœ€è¦ä¸€ä¸ªæ’ä»¶ï¼šeslint-plugin-vueï¼Œå‡å¦‚ä½ çš„é¡¹ç›®ä¹Ÿè·Ÿæˆ‘ä¸€æ ·ç”¨çš„æ˜¯typescriptï¼Œé‚£ä¹ˆè¿˜éœ€è¦å¦ä¸€ä¸ªè§£æå™¨ï¼štypescript-eslint

npm add eslint-plugin-vue typescript-eslint -D

{
	extends: ['plugin:vue/vue3-recommended',]
}

module.exports = {
  extends: ['eslint:recommended', 'plugin:@typescript-eslint/recommended'],
  parser: '@typescript-eslint/parser',
  plugins: ['@typescript-eslint'],
};
```

[eslint-plugin-vue é…ç½®æ–‡æ¡£](https://eslint.vuejs.org/user-guide/)

### å¦‚ä½•ä½¿ç”¨è‡ªå®šä¹‰è§£æå™¨ï¼Ÿ

å¦‚æœæ‚¨æƒ³ä½¿ç”¨è‡ªå®šä¹‰è§£æå™¨ï¼Œä¾‹å¦‚[@babel/eslint-parser](https://www.npmjs.com/package/@babel/eslint-parser)æˆ–[@typescript-eslint/parser](https://www.npmjs.com/package/@typescript-eslint/parser) ï¼Œåˆ™å¿…é¡»ä½¿ç”¨`parserOptions.parser`é€‰é¡¹è€Œä¸æ˜¯`parser`é€‰é¡¹ã€‚å› ä¸ºè¿™ä¸ªæ’ä»¶éœ€è¦[vue-eslint-parser](https://www.npmjs.com/package/vue-eslint-parser)æ¥è§£æ`.vue`æ–‡ä»¶ï¼Œæ‰€ä»¥å¦‚æœä½ è¦†ç›–`parser`é€‰é¡¹ï¼Œè¿™ä¸ªæ’ä»¶å°†ä¸èµ·ä½œç”¨ã€‚

```diff
- "parser": "@typescript-eslint/parser",
+ "parser": "vue-eslint-parser",
  "parserOptions": {
+     "parser": "@typescript-eslint/parser",
      "sourceType": "module"
  }
```



##### tips:

é…ç½® eslint-config-prettier,å°±éœ€è¦ extends: "prettier", æ‰èƒ½çœŸçš„ä½¿ç”¨åˆ°

```json
{
  "extends": ["prettier"]
}
```

è€Œ plugin:prettier/recommended æ˜¯æ’ä»¶é™„å¸¦çš„ï¼Œä¸»è¦æ˜¯å¯ç”¨ä¸€äº›ä¸ Prettier ç›¸å…³çš„ ESLint è§„åˆ™ï¼Œåœ¨ eslint-plugin-prettier çš„ readme ä¸­æœ‰è¿™ä¸ªé…ç½®ï¼Œä¾‹å¦‚ï¼Œå®ƒå¯èƒ½ä¼šè®¾ç½®ä¸€äº›è§„åˆ™ï¼Œä½¿å¾—å½“ä»£ç çš„å¼•å·ä½¿ç”¨ã€ç¼©è¿›ç­‰ä¸ç¬¦åˆ Prettier çš„è¦æ±‚æ—¶ï¼ŒESLint ä¼šäº§ç”Ÿè­¦å‘Šæˆ–è€…é”™è¯¯

è€Œ`eslint - config - prettier`çš„é‡ç‚¹æ˜¯å…³é—­ ESLint ä¸­ä¸ Prettier ç›¸å†²çªçš„è§„åˆ™ã€‚å½“å®ƒè¢«åº”ç”¨æ—¶ï¼Œå®ƒä¼šæŸ¥æ‰¾é‚£äº›å¯èƒ½ä¸ Prettier è§„åˆ™å†²çªçš„ ESLint è§„åˆ™ï¼Œå¹¶å°†å®ƒä»¬è®¾ç½®ä¸º`off`

```json
{
  "extends": ["plugin:prettier/recommended"]
}
```

eslint-config-prettier ä¸»è¦ä½œç”¨æ˜¯å…³é—­ ESLint ä¸­ä¸ Prettier ç›¸å†²çªçš„è§„åˆ™

eslint-plugin-prettier æ˜¯ä¸€ä¸ªå°† Prettier ä½œä¸º ESLint è§„åˆ™æ¥è¿è¡Œçš„æ’ä»¶ã€‚å®ƒå…è®¸ ESLint ä½¿ç”¨ Prettier çš„æ ¼å¼åŒ–è§„åˆ™æ¥æ£€æŸ¥ä»£ç çš„æ ¼å¼é—®é¢˜

ä½¿ç”¨`eslint-plugin-prettier`è¿™ä¸ªæ’ä»¶, è®© eslint å¯ä»¥ä½¿ç”¨ prettier

```bash
npm i eslint-plugin-prettier -D
```

åœ¨`.eslintrc.json`åŠ å…¥`perttier`æ’ä»¶

```json
{
  "plugins": [..., "prettier"], // æ³¨å†Œæ’ä»¶
    "rules": {
      "prettier/perttier": "error", // åŠ å…¥prettierè§„åˆ™
    }
}
```

è€Œ`plugin:prettier/recommended`å¸®æˆ‘ä»¬åšäº†å¦‚ä¸‹äº‹æƒ…ï¼š

```json
{
  "extends": ["prettier"], // ä½¿ç”¨eslinst-config-prettierä¸­çš„é…ç½®é¡¹
  "plugins": ["prettier"], // æ³¨å†Œè¯¥prettieræ’ä»¶
  "rules": {
    "prettier/prettier": "error", // åœ¨eslintä¸­è¿è¡Œprettierï¼Œå¹¶å¯ç”¨è¯¥æ’ä»¶æä¾›çš„è§„åˆ™
    "arrow-body-style": "off", // å…³é—­è§„åˆ™
    "prefer-arrow-callback": "off" // å…³é—­è§„åˆ™
  }
}
```

# husky é…ç½®(å‰ææ˜¯å…ˆæ‰§è¡Œ git init)

```shell
npm install --save-dev husky

npx husky init

// é…ç½® lint-staged
echo 'npm run lint-staged' > .husky/pre-commit

// é…ç½®commitlint
echo "npx --no -- commitlint --edit \$1" > .husky/commit-msg

// åœ¨ package.json ä¸­æ·»åŠ 
"husky": {
  "hooks": {
    "pre-commit": "lint-staged"
  }
},
```

# lint-staged

`lint - staged`æ˜¯ä¸€ä¸ªåœ¨ Git æš‚å­˜åŒºï¼ˆstaged areaï¼‰æ–‡ä»¶ä¸Šè¿è¡Œ lintersï¼ˆä»£ç æ£€æŸ¥å·¥å…·ï¼‰çš„å·¥å…·

```shell
npm i lint-staged -D

"lint-staged": {
  "*.{js,ts,jsx,tsx}": [
    "npx prettier --write .",
    "npx eslint --fix",
    "git add ."
  ]
}
```

# commitlint

```shell
1. commitlint
npm install -D @commitlint/{cli,config-conventional}
echo "export default { extends: ['@commitlint/config-conventional'] };" > .commitlintrc.js
// é…ç½®commitlint
echo "npx --no -- commitlint --edit \$1" > .husky/commit-msg

2. changelog
//é…ç½® changelog æ–‡ä»¶
npm install -g conventional-changelog-cli
//ä¸è¦†ç›–
conventional-changelog -p angular -i CHANGELOG.md -s
//è¦†ç›–ä¹‹å‰çš„è®°å½•
conventional-changelog -p angular -i CHANGELOG.md -s -r 0

{
  "scripts": {
    "version": "conventional-changelog -p angular -i CHANGELOG.md -s && git add CHANGELOG.md"
  }
}

```

# commitizen

ä½œç”¨å°±æ˜¯èƒ½å¤Ÿç›´æ¥å†™å¥½è§„èŒƒçš„ commit ä¿¡æ¯ï¼Œè·Ÿ webstorm æ’ä»¶ä¸€æ ·(Git Commit Message Helper)

```shell
npm i commitizen cz-conventional-changelog -D

npm set-script commit "git-cz"

npx commitizen init cz-conventional-changelog --save-dev --save-exact

//é…ç½®package.json é»˜è®¤ä¼šåŠ å¥½
"config": {
  "commitizen": {
    "path": "./node_modules/cz-customizable"
  }
}

```

å®Œç»“æ’’èŠ±ğŸŒ¸



å¼•ç”¨ï¼š

1. https://juejin.cn/post/6990929456382607374
2. https://juejin.cn/post/6938687606687432740
3. https://github.com/prettier/eslint-plugin-prettier?tab=readme-ov-file
4. https://juejin.cn/post/7143800548704124935
