---
title: ä»£ç æ ¼å¼åŒ–
comments: true
date: 2024-12-06 19:53:25
tags:
---

# å‰ç«¯ä»£ç æ ¼å¼åŒ–å…¨å¥—é…ç½®

<!-- more -->

# prettier å¿«é€Ÿé…ç½®

1. å®‰è£…

```shell
npm install --save-dev --save-exact prettier

// è¿è¡Œ
npx prettier --write index.js
```

2. é…ç½®

```json
// .prettierrc

echo {}> .prettierrc.json

{
  "trailingComma": "es5",
  "tabWidth": 2,
  "semi": false,
  "singleQuote": true
}
```

# eslint å¿«é€Ÿé…ç½®

1. å®‰è£…

```shell
// å®‰è£…ä¸€æ•´å¥—
npm i eslint eslint-config-prettier eslint-plugin-prettier eslint-plugin-vue prettier typescript-eslint -D

// å®‰è£…ä¾èµ–å¹¶åˆ›å»ºeslint.config.js æ–‡ä»¶
npm init @eslint/config@latest

// è¿è¡Œ
eslint æ–‡ä»¶è·¯å¾„ --fix
```

2. é…ç½®

```js
module.exports = {
  env: {
    browser: true,
    es2021: true,
    node: true,
  },
  extends: [
    "eslint:recommended",
    "plugin:vue/vue3-recommended",
    "plugin:@typescript-eslint/recommended",
    "plugin:prettier/recommended",
    "prettier",
  ],
  parserOptions: {
    ecmaVersion: 13,
    sourceType: "module",
  },
  plugins: ["vue", ""],
  rules: {},
};
```

## å†²çªè§£å†³ï¼š

å®‰è£…è§£å†³å†²çªçš„ä¾èµ–

```shell
//1. å®‰è£… eslint-config-prettier
npm i -D eslint-config-prettier

//2. åœ¨eslintçš„é…ç½®æ–‡ä»¶ä¸­å†™å…¥ä»¥ä¸‹å†…å®¹
 extends: ['prettier'], // é¿å…ä¸ prettier å†²çª

//"extends": ["plugin:prettier/recommended"]ä¹Ÿå¯ä»¥è§£å†³å†²çª
```

## [eslint æ–‡ä»¶é…ç½®æ–‡æ¡£](https://eslint.org/docs/v8.x/use/configure/)

4. å…¶ä»–ä¾èµ–å®‰è£…è¯´æ˜

```shell
//ç”±äºESlintæœ¬èº«åªæ”¯æŒè¯†åˆ«JavaScriptï¼Œæ‰€ä»¥å¯¹äºvueæ–‡ä»¶ï¼Œè¿˜éœ€è¦ä¸€ä¸ªæ’ä»¶ï¼šeslint-plugin-vueï¼Œå‡å¦‚ä½ çš„é¡¹ç›®ä¹Ÿè·Ÿæˆ‘ä¸€æ ·ç”¨çš„æ˜¯typescriptï¼Œé‚£ä¹ˆè¿˜éœ€è¦å¦ä¸€ä¸ªè§£æå™¨ï¼štypescript-eslint

npm add eslint-plugin-vue typescript-eslint -D
```

[eslint-plugin-vue é…ç½®æ–‡æ¡£](https://eslint.vuejs.org/user-guide/)

##### tips:

é…ç½® eslint-config-prettier,å°±éœ€è¦ extends: "prettier", æ‰èƒ½çœŸçš„ä½¿ç”¨åˆ°

```json
{
  "extends": ["prettier"]
}
```

è€Œ plugin:prettier/recommended æ˜¯æ’ä»¶é™„å¸¦çš„ï¼Œä¸»è¦æ˜¯å¯ç”¨ä¸€äº›ä¸ Prettier ç›¸å…³çš„ ESLint è§„åˆ™ï¼Œåœ¨ eslint-plugin-prettier çš„ readme ä¸­æœ‰è¿™ä¸ªé…ç½®ï¼Œä¾‹å¦‚ï¼Œå®ƒå¯èƒ½ä¼šè®¾ç½®ä¸€äº›è§„åˆ™ï¼Œä½¿å¾—å½“ä»£ç çš„å¼•å·ä½¿ç”¨ã€ç¼©è¿›ç­‰ä¸ç¬¦åˆ Prettier çš„è¦æ±‚æ—¶ï¼ŒESLint ä¼šäº§ç”Ÿè­¦å‘Šæˆ–è€…é”™è¯¯

è€Œ`eslint - config - prettier`çš„é‡ç‚¹æ˜¯å…³é—­ ESLint ä¸­ä¸ Prettier ç›¸å†²çªçš„è§„åˆ™ã€‚å½“å®ƒè¢«åº”ç”¨æ—¶ï¼Œå®ƒä¼šæŸ¥æ‰¾é‚£äº›å¯èƒ½ä¸ Prettier è§„åˆ™å†²çªçš„ ESLint è§„åˆ™ï¼Œå¹¶å°†å®ƒä»¬è®¾ç½®ä¸º`off`

```json
{
  "extends": ["plugin:prettier/recommended"]
}
```

eslint-config-prettier ä¸»è¦ä½œç”¨æ˜¯å…³é—­ ESLint ä¸­ä¸ Prettier ç›¸å†²çªçš„è§„åˆ™

eslint-plugin-prettier æ˜¯ä¸€ä¸ªå°† Prettier ä½œä¸º ESLint è§„åˆ™æ¥è¿è¡Œçš„æ’ä»¶ã€‚å®ƒå…è®¸ ESLint ä½¿ç”¨ Prettier çš„æ ¼å¼åŒ–è§„åˆ™æ¥æ£€æŸ¥ä»£ç çš„æ ¼å¼é—®é¢˜

ä½¿ç”¨`eslint-plugin-prettier`è¿™ä¸ªæ’ä»¶, è®© eslint å¯ä»¥ä½¿ç”¨ prettier

```bash
npm i eslint-plugin-prettier -D
```

åœ¨`.eslintrc.json`åŠ å…¥`perttier`æ’ä»¶

```json
{
  "plugins": [..., "prettier"], // æ³¨å†Œæ’ä»¶
    "rules": {
      "prettier/perttier": "error", // åŠ å…¥prettierè§„åˆ™
    }
}
```

è€Œ`plugin:prettier/recommended`å¸®æˆ‘ä»¬åšäº†å¦‚ä¸‹äº‹æƒ…ï¼š

```json
{
  "extends": ["prettier"], // ä½¿ç”¨eslinst-config-prettierä¸­çš„é…ç½®é¡¹
  "plugins": ["prettier"], // æ³¨å†Œè¯¥prettieræ’ä»¶
  "rules": {
    "prettier/prettier": "error", // åœ¨eslintä¸­è¿è¡Œprettierï¼Œå¹¶å¯ç”¨è¯¥æ’ä»¶æä¾›çš„è§„åˆ™
    "arrow-body-style": "off", // å…³é—­è§„åˆ™
    "prefer-arrow-callback": "off" // å…³é—­è§„åˆ™
  }
}
```

# husky é…ç½®

```shell
npm install --save-dev husky

npx husky init

npx husky add .husky/commit-msg 'npm run commitlint --edit "$1"'
```

# commitlint

```shell
npm i @commitlint/cli @commitlint/config-conventional -D

// @see: https://cz-git.qbenben.com/zh/guide
/** @type {import('cz-git').UserConfig} */

module.exports = {
	ignores: [(commit) => commit.includes("init")],
	extends: ["@commitlint/config-conventional", "cz"],
	rules: {
		// @see: https://commitlint.js.org/#/reference-rules
		"body-leading-blank": [2, "always"],
		"footer-leading-blank": [1, "always"],
		"header-max-length": [2, "always", 108],
		"subject-empty": [2, "never"],
		"type-empty": [2, "never"],
		"subject-case": [0],
		"type-enum": [
			2,
			"always",
			[
				"feat",
				"fix",
				"docs",
				"style",
				"refactor",
				"perf",
				"test",
				"build",
				"ci",
				"chore",
				"revert",
				"wip",
				"workflow",
				"types",
				"release"
			]
		]
	},
	prompt: {
		messages: {
			type: "Select the type of change that you're committing:",
			scope: "Denote the SCOPE of this change (optional):",
			customScope: "Denote the SCOPE of this change:",
			subject: "Write a SHORT, IMPERATIVE tense description of the change:\n",
			body: 'Provide a LONGER description of the change (optional). Use "|" to break new line:\n',
			breaking: 'List any BREAKING CHANGES (optional). Use "|" to break new line:\n',
			footerPrefixsSelect: "Select the ISSUES type of changeList by this change (optional):",
			customFooterPrefixs: "Input ISSUES prefix:",
			footer: "List any ISSUES by this change. E.g.: #31, #34:\n",
			confirmCommit: "Are you sure you want to proceed with the commit above?"
			// ä¸­æ–‡ç‰ˆ
			// type: "é€‰æ‹©ä½ è¦æäº¤çš„ç±»å‹ :",
			// scope: "é€‰æ‹©ä¸€ä¸ªæäº¤èŒƒå›´ï¼ˆå¯é€‰ï¼‰:",
			// customScope: "è¯·è¾“å…¥è‡ªå®šä¹‰çš„æäº¤èŒƒå›´ :",
			// subject: "å¡«å†™ç®€çŸ­ç²¾ç‚¼çš„å˜æ›´æè¿° :\n",
			// body: 'å¡«å†™æ›´åŠ è¯¦ç»†çš„å˜æ›´æè¿°ï¼ˆå¯é€‰ï¼‰ã€‚ä½¿ç”¨ "|" æ¢è¡Œ :\n',
			// breaking: 'åˆ—ä¸¾éå…¼å®¹æ€§é‡å¤§çš„å˜æ›´ï¼ˆå¯é€‰ï¼‰ã€‚ä½¿ç”¨ "|" æ¢è¡Œ :\n',
			// footerPrefixsSelect: "é€‰æ‹©å…³è”issueå‰ç¼€ï¼ˆå¯é€‰ï¼‰:",
			// customFooterPrefixs: "è¾“å…¥è‡ªå®šä¹‰issueå‰ç¼€ :",
			// footer: "åˆ—ä¸¾å…³è”issue (å¯é€‰) ä¾‹å¦‚: #31, #I3244 :\n",
			// confirmCommit: "æ˜¯å¦æäº¤æˆ–ä¿®æ”¹commit ?"
		},
		types: [
			{
				value: "feat",
				name: "feat:     ğŸš€  A new feature",
				emoji: "ğŸš€"
			},
			{
				value: "fix",
				name: "fix:      ğŸ§©  A bug fix",
				emoji: "ğŸ§©"
			},
			{
				value: "docs",
				name: "docs:     ğŸ“š  Documentation only changes",
				emoji: "ğŸ“š"
			},
			{
				value: "style",
				name: "style:    ğŸ¨  Changes that do not affect the meaning of the code",
				emoji: "ğŸ¨"
			},
			{
				value: "refactor",
				name: "refactor: â™»ï¸   A code change that neither fixes a bug nor adds a feature",
				emoji: "â™»ï¸"
			},
			{
				value: "perf",
				name: "perf:     âš¡ï¸  A code change that improves performance",
				emoji: "âš¡ï¸"
			},
			{
				value: "test",
				name: "test:     âœ…  Adding missing tests or correcting existing tests",
				emoji: "âœ…"
			},
			{
				value: "build",
				name: "build:    ğŸ“¦ï¸   Changes that affect the build system or external dependencies",
				emoji: "ğŸ“¦ï¸"
			},
			{
				value: "ci",
				name: "ci:       ğŸ¡  Changes to our CI configuration files and scripts",
				emoji: "ğŸ¡"
			},
			{
				value: "chore",
				name: "chore:    ğŸ”¨  Other changes that don't modify src or test files",
				emoji: "ğŸ”¨"
			},
			{
				value: "revert",
				name: "revert:   âªï¸  Reverts a previous commit",
				emoji: "âªï¸"
			}
			// ä¸­æ–‡ç‰ˆ
			// { value: "ç‰¹æ€§", name: "ç‰¹æ€§:   ğŸš€  æ–°å¢åŠŸèƒ½", emoji: "ğŸš€" },
			// { value: "ä¿®å¤", name: "ä¿®å¤:   ğŸ§©  ä¿®å¤ç¼ºé™·", emoji: "ğŸ§©" },
			// { value: "æ–‡æ¡£", name: "æ–‡æ¡£:   ğŸ“š  æ–‡æ¡£å˜æ›´", emoji: "ğŸ“š" },
			// { value: "æ ¼å¼", name: "æ ¼å¼:   ğŸ¨  ä»£ç æ ¼å¼ï¼ˆä¸å½±å“åŠŸèƒ½ï¼Œä¾‹å¦‚ç©ºæ ¼ã€åˆ†å·ç­‰æ ¼å¼ä¿®æ­£ï¼‰", emoji: "ğŸ¨" },
			// { value: "é‡æ„", name: "é‡æ„:   â™»ï¸  ä»£ç é‡æ„ï¼ˆä¸åŒ…æ‹¬ bug ä¿®å¤ã€åŠŸèƒ½æ–°å¢ï¼‰", emoji: "â™»ï¸" },
			// { value: "æ€§èƒ½", name: "æ€§èƒ½:   âš¡ï¸  æ€§èƒ½ä¼˜åŒ–", emoji: "âš¡ï¸" },
			// { value: "æµ‹è¯•", name: "æµ‹è¯•:   âœ…  æ·»åŠ ç–æ¼æµ‹è¯•æˆ–å·²æœ‰æµ‹è¯•æ”¹åŠ¨", emoji: "âœ…" },
			// { value: "æ„å»º", name: "æ„å»º:   ğŸ“¦ï¸  æ„å»ºæµç¨‹ã€å¤–éƒ¨ä¾èµ–å˜æ›´ï¼ˆå¦‚å‡çº§ npm åŒ…ã€ä¿®æ”¹ webpack é…ç½®ç­‰ï¼‰", emoji: "ğŸ“¦ï¸" },
			// { value: "é›†æˆ", name: "é›†æˆ:   ğŸ¡  ä¿®æ”¹ CI é…ç½®ã€è„šæœ¬", emoji: "ğŸ¡" },
			// { value: "å›é€€", name: "å›é€€:   âªï¸  å›æ»š commit", emoji: "âªï¸" },
			// { value: "å…¶ä»–", name: "å…¶ä»–:   ğŸ”¨  å¯¹æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·å’Œåº“çš„æ›´æ”¹ï¼ˆä¸å½±å“æºæ–‡ä»¶ã€æµ‹è¯•ç”¨ä¾‹ï¼‰", emoji: "ğŸ”¨" }
		],
		useEmoji: true,
		themeColorCode: "",
		scopes: [],
		allowCustomScopes: true,
		allowEmptyScopes: true,
		customScopesAlign: "bottom",
		customScopesAlias: "custom",
		emptyScopesAlias: "empty",
		upperCaseSubject: false,
		allowBreakingChanges: ["feat", "fix"],
		breaklineNumber: 100,
		breaklineChar: "|",
		skipQuestions: [],
		issuePrefixs: [{ value: "closed", name: "closed:   ISSUES has been processed" }],
		customIssuePrefixsAlign: "top",
		emptyIssuePrefixsAlias: "skip",
		customIssuePrefixsAlias: "custom",
		allowCustomIssuePrefixs: true,
		allowEmptyIssuePrefixs: true,
		confirmColorize: true,
		maxHeaderLength: Infinity,
		maxSubjectLength: Infinity,
		minSubjectLength: 0,
		scopeOverrides: undefined,
		defaultBody: "",
		defaultIssues: "",
		defaultScope: "",
		defaultSubject: ""
	}
};

```

# lint-staged

```shell
npm i lint-staged -D

"husky": {
    "hooks": {
      "pre-commit": "lint-staged"
    }
  },
  "lint-staged": {
    "*.{js,ts,jsx,tsx}": [
      "npx prettier --write .",
      "eslint  --fix",
      "git add"
    ]
  }
```

# commitizen

```shell
npm i commitizen cz-conventional-changelog -D

npm set-script commit "git-cz"

npx commitizen init cz-conventional-changelog --save-dev --save-exact

//é…ç½®cz-config.js

"config": {
  "commitizen": {
    "path": "./node_modules/cz-customizable"
  }
}

```

å¼•ç”¨ï¼š

1. https://juejin.cn/post/6990929456382607374
2. https://juejin.cn/post/6938687606687432740
3. https://github.com/prettier/eslint-plugin-prettier?tab=readme-ov-file
4. https://juejin.cn/post/7143800548704124935
